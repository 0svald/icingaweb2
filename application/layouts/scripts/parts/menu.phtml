<?= $this->sub ? '<ul>' : '<ul class="nav nav-stacked" role="navigation" id="icinganavigation">' ?>
    <?php foreach ($this->items as $item): ?>
        <?php
        $itemClass = '';
        if ($this->sub) {
            $itemClass .= 'submenu ';
        }
        if ($this->href($this->url) === $this->href($item->getUrl())) {
            $itemClass .= 'active ';
        }
        ?>
        <li <?php if (!empty($itemClass)): ?>class="<?= $itemClass ?>"<?php endif ?>>
            <?php if($item->getUrl()): ?>
                <a href="<?= $this->href($item->getUrl()); ?>">
            <?php endif; ?>
            <?php
            if ($icon = $item->getIcon()) {
                echo $this->img($icon, array('height' => '16px', 'width' => '16px'));
            }
            ?>
            <?php if ($iconClass = $item->getIconClass()): ?>
            <i class="<?= $iconClass ?>"></i>
            <?php endif ?>
            <?= $item->getTitle();?>
            <?php if($item->getUrl()): ?>
                </a>
            <?php endif; ?>
            <?php
            if($item->hasChildren()) {
                echo $this->partial(
                    'parts/menu.phtml',
                    array('items' => $item->getChildren(), 'sub' => true, 'url' => $this->url)
                );
            }
            ?>
        </li>
    <?php endforeach ?>
</ul>
