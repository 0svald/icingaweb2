<?php
    $hostgroupLinkList = array();
    if (!empty($this->hostgroups)) {
        foreach ($this->hostgroups as $name => $alias) {
            $hostgroupLinkList[] = $this->qlink(
                $alias,
                'monitoring/list/services',
                array(
                    'hostgroups' => $name
                )
            );
        }
    }

    $checkCommandParts = explode('!', $this->host->host_check_command, 2);
?>
<?=
    $this->partial(
        'show/header.phtml',
        array(
            'host'    => $this->host,
            'service' => $this->service,
            'tabs'    => $this->tabs,
            'compact' => $this->compact
        )
    );
?>

<?= $this->preview_image ?>
<div class="information-container">
    <div class="head">
        <span>Plugin output</span>
    </div>
    <div>
        <?= $this->pluginOutput($this->host->host_output); ?>
        <?= $this->pluginOutput($this->host->host_long_output); ?>
    </div>
</div>

<div class="information-container">
    <div class="head">
        <span>Command</span>
    </div>

    <div>
        <strong>Command:</strong>
        <?= array_shift($checkCommandParts); ?>
        <?= $this->commandArguments($this->host->host_check_command); ?>
    </div>
</div>

<div class="information-container">
    <div class="head">
        <span>Groups and Contacts</span>
    </div>
    <?php if (count($hostgroupLinkList)) { ?>
        <strong>Hostgroups:</strong>
        <?= implode(' ', $hostgroupLinkList); ?>
    <?php } ?>

    <?= $this->render('show/components/contacts.phtml') ?>
</div>

<?= $this->render('show/components/comments.phtml'); ?>

<?= $this->render('show/components/downtime.phtml'); ?>

<?= $this->render('show/components/customvars.phtml'); ?>

<?php if ($this->host->host_perfdata): ?>
    <div class="information-container">
        <div class="head">
            <span>Perfdata</span>
        </div>
        <div>
            <?= $this->perfdata($this->host->host_perfdata); ?>
        </div>
    </div>
<?php endif; ?>

<div class="information-container">
    <div class="head">
        <span>Flags</span>
    </div>
    <div>
        <?= $this->render('show/components/flags.phtml'); ?>
    </div>
</div>

<div class="information-container">
    <div class="head">
        <span>Properties</span>
    </div>
    <div>
        <?= $this->render('show/components/properties.phtml'); ?>
    </div>
</div>

<div class="information-container">
    <div class="head">
        <span>Groups and Contacts</span>
    </div>
    <?php if (count($hostgroupLinkList)) { ?>
        <strong>Hostgroups:</strong>
        <?= implode(' ', $hostgroupLinkList); ?>
    <?php } ?>

    <?= $this->render('show/components/contacts.phtml') ?>
</div>

<?= $this->render('show/components/comments.phtml'); ?>

<?= $this->render('show/components/customvars.phtml'); ?>

<?php if ($this->host->host_perfdata): ?>
    <div class="information-container">
        <div class="head">
            <span>Perfdata</span>
        </div>
        <div>
            <?= $this->perfdata($this->host->host_perfdata); ?>
        </div>
    </div>
<?php endif; ?>
        <span>Commands</span>
    </div>
    <div>
        <?= $this->monitoringCommands($this->host, 'full'); ?>
    </div>
</div>
