<?php if (! $this->compact): ?>
<div class="controls dont-print">
    <?= $tabs ?>
    <div class="text-right">
        <?= $this->render('list/components/selectioninfo.phtml'); ?>
    </div>
    <div class="grid">
        <div class="col-1-3">
            <?= $this->limiter ?>
        </div>
        <div class="col-1-3">
            <?= $this->paginator ?>
        </div>
        <div class="col-1-3 text-right">
            <?= $this->sortBox ?>
        </div>
    </div>
    <?= $this->filterEditor ?>
</div>
<?php endif ?>
<div class="content">
  <table data-base-target="_next"
         class="action-table multiselect"
         data-icinga-multiselect-url="<?= $this->href('monitoring/comments/show'); ?>"
         data-icinga-multiselect-related="<?= $this->href("monitoring/comments") ?>"
         data-icinga-multiselect-data="comment_id">
    <tbody>
    <?php foreach ($comments->peekAhead($this->compact) as $comment): ?>
      <tr href="<?=  $this->href('monitoring/comment/show', array('comment_id' => $comment->id)) ?>">
        <td class="icon-col">
          <?= $this->partial('partials/comment/comment-description.phtml', array('comment' => $comment)); ?>
        </td>
        <td>
          <?= $this->partial(
              'partials/comment/comment-detail.phtml',
              array(
                  'comment'        => $comment,
                  'delCommentForm' => $delCommentForm // Form is unset if the current user lacks the respective permission
          )) ?>
        </td>
      </tr>
    <?php endforeach ?>
    </tbody>
  </table>
<?php if (! $comments->hasResult()): ?>
  <?= $this->translate('No comments found matching the filter'); ?>
<?php elseif ($comments->hasMore()): ?>
  <?= $this->qlink(
    $this->translate('Show More'),
    $this->url()->without(array('view', 'limit')),
    null,
    array(
      'data-base-target'    => '_next',
      'class'               => 'pull-right show-more'
    )
  ); ?>
<?php endif ?>
</div>
