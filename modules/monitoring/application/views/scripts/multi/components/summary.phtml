<?php
/** @var Zend_View_Helper_CommandForm $cf */
$cf = $this->getHelper('CommandForm');
$servicequery = isset($this->servicequery) ? $this->servicequery : '';
?>

<div class="container">
    <ul class="list-inline">
        <?php
        for ($i = 0; $i < count($objects) && $i < 10; $i++) {
            $object = $objects[$i];
            ?>
            <li>
                <a href="<?php
                if ($this->is_service) {
                    echo $this->href(
                        'monitoring/show/service',
                        array(
                            'host' => $object->host_name,
                            'service' => $object->service_description
                        )
                    );
                } else {
                    echo $this->href(
                        'monitoring/show/host', array('host' => $object->host_name)
                    );
                }?>" >
                    <?= $object->host_name; ?>
                    <?= isset($object->service_description) ? $object->service_description : '' ?>
                </a>
            </li>
        <?php } ?>
    </ul>
    <?php
    if (count($objects) > 10) {
        $text = ' and ' . (count($objects) - 10) . ' more ...';
    } else {
        $text = ' show all ...';
    }
    if ($this->is_service) {
        $link = 'monitoring/list/hosts';
        $target = array(
            'host' => implode(',', $hostnames)
        );
    } else {
        $link = 'monitoring/list/services';
        // TODO: Show multiple targets for services
        $target = array();
    }
    ?>
    <a class="pull-right" href="<?= $this->href($link, $target); ?>"> <?= $text ?></a>
</div>
<br />
<div class="panel-row">
<a href="<?=
$this->href(
    'monitoring/command/reschedulenextcheck',
	$this->target
);
?>" class="button btn-cta btn-half-left">
    Recheck
</a>
<a href="<?=
$this->href(
    'monitoring/command/reschedulenextcheck',
    $this->target
);
?>" class="button btn-cta btn-half-right">
    Reschedule
</a>
</div>

<div>
    The selected objects have <span class="badge"> <?= $this->problems ?> </span> service problems. <br /><br />

    <a rel="tooltip" title="Acknowledge all problems on the selected hosts or services" href="<?=
    $this->href(
        'monitoring/command/acknowledgeproblem',
        $this->target
    );
    ?>" class="button btn-cta btn-half-left">
        Acknowledge Problems
    </a>

    <a rel="tooltip" title="Schedule downtimes for all selected hosts" href="<?=
    $this->href(
        'monitoring/command/scheduledowntime',
        $this->target
    );
    ?>" class="button btn-cta btn-half-right">
        Schedule Downtimes
    </a>
</div>
