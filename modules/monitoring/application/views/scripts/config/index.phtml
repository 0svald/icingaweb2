<?php use Icinga\Web\Url;  ?>
<?= $this->tabs->render($this); ?>

<h3>Monitoring Backends</h3>

<?php if (isset($this->messageBox)): ?>
  <?= $this->messageBox->render() ?>
<?php endif ?>

<div>
  <a href="<?= Url::fromPath('/monitoring/config/createbackend')->getAbsoluteUrl();?>">
      <i class="icinga-icon-create"></i> Create New Monitoring Backend
  </a>
</div>
<br/>

<?php foreach ($this->backends as $backendName => $config): ?>
<div>
  <?php $removeUrl = Url::fromPath('/monitoring/config/removebackend', array('backend' => $backendName)); ?>
  <?php $editUrl = Url::fromPath('/monitoring/config/editbackend', array('backend' => $backendName)); ?>
  <b><?= $this->escape($backendName); ?></b>
  <small>(Type: <?= $this->escape($config['type'] === 'ido' ? 'IDO' : ucfirst($config['type'])); ?>)</small>
  <div>
    <a href="<?= $removeUrl; ?>"><i class="icinga-icon-remove"></i> Remove This Backend</a><br/>
    <a href="<?= $editUrl; ?>"><i class="icinga-icon-edit"></i>  Edit This Backend</a>
  </div>
</div>
<br/>
<?php endforeach; ?>

<br/>

<h3>Monitoring Instances</h3>

<div>
  <a href="<?= Url::fromPath('/monitoring/config/createinstance')->getAbsoluteUrl();?>">
      <i class="icinga-icon-create"></i> Create New Instance
  </a>
</div>

<br/>
<?php foreach ($this->instances as $instanceName => $config): ?>
  <?php $removeUrl = Url::fromPath('/monitoring/config/removeinstance', array('instance' => $instanceName)); ?>
  <?php $editUrl = Url::fromPath('/monitoring/config/editinstance', array('instance' => $instanceName)); ?>
<div>
  <b><?= $this->escape($instanceName); ?></b>
  <small>(Type: <?= isset($config['host']) ? 'Remote' : 'Local'; ?>)</small>

  <div>
    <a href="<?= $removeUrl; ?>"><i class="icinga-icon-remove"></i> Remove This Instance</a><br/>
    <a href="<?= $editUrl; ?>"><i class="icinga-icon-edit"></i>  Edit This Instance</a>
  </div>
</div>
<br/>
<?php endforeach; ?>

